{"ast":null,"code":"import _objectSpread from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import{v4}from'uuid';import axios from'axios';import styled from'styled-components';import{colors}from'../utils/_var';import Header from'./Header';import Movies from'./Movies';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n background-color: \",\";\\n display: flex;\\n flex-direction: column;\\n min-height: 100vh;\\n padding: 0;\\n margin: 0;\\n\"])),colors.$black);var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];//  checking if user has a uuid in the localstorage, if not create an uuid and set to localStorage. \nvar checkLocalStorage=function checkLocalStorage(){var userCode=localStorage.getItem('uuid');if(userCode){return null;}else{userCode=v4();var options={method:'POST',url:'http://localhost:3000/users',headers:{'Content-Type':'application/json'},data:{uuid:userCode}};localStorage.setItem('uuid',userCode);// start loading animation here\naxios.request(options).then(function(response){console.log(response.data);// stop loading animation here\n}).catch(function(error){return console.log(error);});}};useEffect(function(){checkLocalStorage();});// add movies to the state\nvar configMovies=function configMovies(backendData,rapidData){if(backendData.length===0){var newData=_toConsumableArray(rapidData);newData.map(function(movie){movie['up_count']=0;movie['down_count']=0;movie['liked']=false;movie['disliked']=false;});setMovies(newData);}else{var configedMovies=[];var _loop=function _loop(i){var backendMovie=backendData.find(function(movie){return movie['query']===rapidData[i].id;});if(backendMovie){var tempObj=_objectSpread({},rapidData[i]);tempObj['up_count']=backendMovie['up_count'];tempObj['down_count']=backendMovie['down_count'];configedMovies.push(tempObj);}else{var _tempObj=_objectSpread({},rapidData[i]);_tempObj['up_count']=0;_tempObj['down_count']=0;configedMovies.push(_tempObj);}};for(var i in rapidData){_loop(i);}setMovies(configedMovies);}};//  update movie up count or down count\nvar updateMovie=function updateMovie(c){var movie=movies.find(function(movie){return movie.id===c.query;});movie['up_count']=c.up_count;movie['down_count']=c.down_count;var newMovies=_toConsumableArray(movies);setMovies(newMovies);};return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Header,{configMovies:configMovies}),/*#__PURE__*/_jsx(Movies,{movies:movies,updateMovie:updateMovie})]});};export default Home;","map":{"version":3,"sources":["/Users/keenanjones/Desktop/Projects/YearOne/frontend/src/components/Home.js"],"names":["React","useState","useEffect","v4","axios","styled","colors","Header","Movies","Wrapper","div","$black","Home","movies","setMovies","checkLocalStorage","userCode","localStorage","getItem","options","method","url","headers","data","uuid","setItem","request","then","response","console","log","catch","error","configMovies","backendData","rapidData","length","newData","map","movie","configedMovies","i","backendMovie","find","id","tempObj","push","updateMovie","c","query","up_count","down_count","newMovies"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { v4 } from 'uuid';\nimport axios from 'axios'\nimport styled from 'styled-components'\nimport {colors} from '../utils/_var'\nimport Header from './Header'\nimport Movies from './Movies'\n\nconst Wrapper = styled.div`\n background-color: ${colors.$black};\n display: flex;\n flex-direction: column;\n min-height: 100vh;\n padding: 0;\n margin: 0;\n`\n\n\n\nconst Home = () => {\n const [movies, setMovies] = useState([])\n\n//  checking if user has a uuid in the localstorage, if not create an uuid and set to localStorage. \n const checkLocalStorage = () => {\n  let userCode = localStorage.getItem('uuid')\n  if(userCode){\n   return null\n  }else{\n   userCode = v4()\n   const options = {\n    method: 'POST',\n    url: 'http://localhost:3000/users',\n    headers: {'Content-Type': 'application/json'},\n    data: {uuid: userCode}\n   }\n\n   localStorage.setItem('uuid', userCode)\n\n   // start loading animation here\n\n   axios.request(options).then((response) => {\n     console.log(response.data)\n     // stop loading animation here\n   }).catch((error) => console.log(error))\n  }\n }\n\n useEffect(() => {\n  checkLocalStorage()\n })\n\n // add movies to the state\n const configMovies = (backendData, rapidData) => {\n  if(backendData.length === 0){\n    let newData = [...rapidData]\n    newData.map(movie => {\n      movie['up_count'] = 0\n      movie['down_count'] = 0\n      movie['liked'] = false\n      movie['disliked'] = false\n    })\n    setMovies(newData)\n  }else{\n    let configedMovies = []\n    for(let i in rapidData){\n      let backendMovie = backendData.find(movie => movie['query'] === rapidData[i].id)\n      if(backendMovie){\n        let tempObj = {...rapidData[i]}\n        tempObj['up_count'] = backendMovie['up_count']\n        tempObj['down_count'] = backendMovie['down_count']\n        configedMovies.push(tempObj)\n      }else{\n        let tempObj = {...rapidData[i]}\n        tempObj['up_count'] = 0\n        tempObj['down_count'] = 0\n        configedMovies.push(tempObj)\n      }\n    }\n    setMovies(configedMovies)\n  }\n }\n\n//  update movie up count or down count\n const updateMovie = (c) => {\n  let movie = movies.find(movie => movie.id === c.query)\n  movie['up_count'] = c.up_count\n  movie['down_count'] = c.down_count\n  let newMovies = [...movies]\n  setMovies(newMovies)\n }\n\n return (\n  <Wrapper>\n    <Header configMovies={configMovies} />\n    <Movies movies={movies} updateMovie={updateMovie}/>\n  </Wrapper>\n )\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}