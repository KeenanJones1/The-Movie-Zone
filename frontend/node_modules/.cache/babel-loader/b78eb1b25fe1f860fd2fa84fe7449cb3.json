{"ast":null,"code":"import _objectSpread from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/keenanjones/Desktop/Projects/YearOne/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import axios from'axios';import styled from'styled-components';import Movie from'./Movie';import{jsx as _jsx}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 2rem 0;\\n  line-height: 1.5;\\n  margin: 2rem;\\n  \\n\\n  @media(min-width: 576px){\\n   .center{\\n    display: flex;\\n    justify-content: space-between; \\n    flex-wrap: wrap;\\n    padding: 0 4rem;\\n    }\\n\\n    .movie{\\n    flex: 0 0 calc(50% - 1rem);\\n    margin-bottom: 1rem;\\n    }\\n   }\\n\\n   @media(min-width: 992px){\\n   .movie{\\n    flex: 0 0 calc(33.33% - 1rem);\\n    margin-bottom: 1rem;\\n   }\\n  }\\n\\n  @media(min-width: 1170px){\\n   .movie{\\n    display: flex; \\n    text-align: left;\\n   }\\n  }\\n\"])));var Catalog=function Catalog(_ref){var movies=_ref.movies,updateMovie=_ref.updateMovie;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newMovies=_useState2[0],setNewMovies=_useState2[1];// checking if any movie from the api, has been liked or disliked by user \nvar checkUserMovies=function checkUserMovies(liked,disliked,movies){// queries are an unique string from the rapid api \nvar liked_queries=[];var disliked_queries=[];var newMovies=[];for(var i=0;liked.length>i;i++){liked_queries.push(liked[i].movie.query);}for(var _i=0;disliked.length>_i;_i++){disliked_queries.push(disliked[_i].movie.query);}for(var _i2=0;movies.length>_i2;_i2++){if(liked_queries.includes(movies[_i2].id)){var temp=_objectSpread({},movies[_i2]);temp['liked']=true;temp['disliked']=false;newMovies.push(temp);}else if(disliked_queries.includes(movies[_i2].id)){var _temp=_objectSpread({},movies[_i2]);_temp['disliked']=true;_temp['liked']=false;newMovies.push(_temp);}else{console.log(movies[_i2]);var _temp2=_objectSpread({},movies[_i2]);_temp2['liked']=false;_temp2['disliked']=false;newMovies.push(_temp2);}}setNewMovies(newMovies);};// getting movies liked and disliked by user from past\nvar getUserMovies=function getUserMovies(){var uuid=localStorage.getItem('uuid');var options={method:'GET',url:\"http://localhost:3000/users/\".concat(uuid,\"/\"),headers:{'Content-Type':'application/json'}};axios.request(options).then(function(resp){checkUserMovies(resp.data.likes,resp.data.dislikes,movies);}).catch(function(err){return console.log(err);});};// render movie component, after checking if user has liked  or disliked in the past. \nvar renderMovies=function renderMovies(){if(newMovies.length>0){return newMovies.map(function(movie){return/*#__PURE__*/_jsx(Movie,{movie:movie,className:\"movie\",updateMovie:updateMovie},movie.id);});}else{return movies.map(function(movie){return/*#__PURE__*/_jsx(Movie,{movie:movie,className:\"movie\",updateMovie:updateMovie},movie.id);});}};useEffect(function(){getUserMovies();},[movies]);return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:movies.length?renderMovies():null})});};export default Catalog;","map":{"version":3,"sources":["/Users/keenanjones/Desktop/Projects/YearOne/frontend/src/components/Movies.js"],"names":["React","useState","useEffect","axios","styled","Movie","Wrapper","div","Catalog","movies","updateMovie","newMovies","setNewMovies","checkUserMovies","liked","disliked","liked_queries","disliked_queries","i","length","push","movie","query","includes","id","temp","console","log","getUserMovies","uuid","localStorage","getItem","options","method","url","headers","request","then","resp","data","likes","dislikes","catch","err","renderMovies","map"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport styled from 'styled-components'\nimport Movie from './Movie'\n\nconst Wrapper = styled.div`\n  padding: 2rem 0;\n  line-height: 1.5;\n  margin: 2rem;\n  \n\n  @media(min-width: 576px){\n   .center{\n    display: flex;\n    justify-content: space-between; \n    flex-wrap: wrap;\n    padding: 0 4rem;\n    }\n\n    .movie{\n    flex: 0 0 calc(50% - 1rem);\n    margin-bottom: 1rem;\n    }\n   }\n\n   @media(min-width: 992px){\n   .movie{\n    flex: 0 0 calc(33.33% - 1rem);\n    margin-bottom: 1rem;\n   }\n  }\n\n  @media(min-width: 1170px){\n   .movie{\n    display: flex; \n    text-align: left;\n   }\n  }\n`\n\n\nconst Catalog = ({movies, updateMovie}) => {\n  const [newMovies, setNewMovies] = useState([])\n\n  // checking if any movie from the api, has been liked or disliked by user \n  const checkUserMovies = (liked, disliked, movies) => {\n    // queries are an unique string from the rapid api \n    let liked_queries = []\n    let disliked_queries = []\n    let newMovies = []\n\n    for(let i = 0; liked.length > i; i++){\n      liked_queries.push(liked[i].movie.query)\n    }\n\n    for(let i = 0; disliked.length > i; i++){\n      disliked_queries.push(disliked[i].movie.query)\n    }\n\n    for(let i = 0; movies.length > i; i++){\n      if(liked_queries.includes(movies[i].id)){\n        let temp = {...movies[i]}\n        temp['liked'] = true\n        temp['disliked'] = false\n        newMovies.push(temp)\n      }\n      else if(disliked_queries.includes(movies[i].id)){\n        let temp = {...movies[i]}\n        temp['disliked'] = true\n        temp['liked'] = false\n        newMovies.push(temp)\n      }\n      else{\n        console.log(movies[i])\n        let temp = {...movies[i]}\n        temp['liked'] = false\n        temp['disliked'] = false\n        newMovies.push(temp)\n      }\n    }\n    setNewMovies(newMovies)\n  }\n\n  // getting movies liked and disliked by user from past\n const getUserMovies = () => {\n  const uuid = localStorage.getItem('uuid')\n  const options = {\n   method: 'GET',\n   url: `http://localhost:3000/users/${uuid}/`,\n   headers: {'Content-Type': 'application/json'},\n  }\n    axios.request(options).then((resp) =>{\n     checkUserMovies(resp.data.likes, resp.data.dislikes, movies)\n    }).catch((err) => console.log(err))\n }\n\n\n\n\n\n// render movie component, after checking if user has liked  or disliked in the past. \n const renderMovies = () => {\n   if(newMovies.length > 0){\n     return newMovies.map( movie => \n      <Movie movie={movie} className=\"movie\" key={movie.id} updateMovie={updateMovie}/>\n     )\n   }else{\n    return movies.map( movie => \n      <Movie movie={movie} className=\"movie\" key={movie.id} updateMovie={updateMovie}/>\n     )\n   }\n }\n\n\nuseEffect(() => {\n  getUserMovies()\n}, [movies])\n\n return (\n  <Wrapper>\n  <div className=\"center\">\n   {movies.length ? renderMovies() : null}\n  </div>\n  </Wrapper>\n )\n}\n\nexport default Catalog\n"]},"metadata":{},"sourceType":"module"}